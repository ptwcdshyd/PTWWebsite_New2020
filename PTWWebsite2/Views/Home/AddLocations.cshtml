@model PTW.DataAccess.Models.Main
@{
    Layout = "~/Views/Shared/_LayoutForPtwCms.cshtml";
}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.min.css">
@*<link href="~/css/Editor/Css/chosen.min.css" rel="stylesheet" />*@
<link href="~/css/jquery.gritter.css" rel="stylesheet" />
<link href="~/css/select2.css" rel="stylesheet" />

<script src="~/js/Editor/jquery-3.5.1.min.js"></script>
<script src="~/js/Editor/popper.min.js"></script>
<script src="~/js/Editor/1.9.1.jquery.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>

<script src="~/js/Editor/chosen.jquery.min.js"></script>
<script src="~/js/jquery.gritter.min.js"></script>



<link href="~/css/Editor/Css/4.4.1.bootstrap.min.css" rel="stylesheet" />
<script src="~/js/Editor/4.4.1.bootstrap.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.css" rel="stylesheet">
@*<link href="~/css/Editor/Css/summernote-bs4.min.css" rel="stylesheet" />*@
<script src="~/js/Editor/summernote-bs4.min.js"></script>


@*<script src="~/js/summernote.min.js"></script>*@
<style>


    #region1 {
        outline: 0;
        background-image: none;
        width: 100%;
        /*height: 100%;*/
        color: black;
        cursor: pointer;
        border: 1px solid black;
        border-radius: 15px;
        padding: 6px 6px 6px 6px;
    }

    #language1 {
        outline: 0;
        background-image: none;
        width: 100%;
        /*height: 100%;*/
        color: black;
        cursor: pointer;
        border: 1px solid black;
        border-radius: 15px;
        padding: 6px 6px 6px 6px;
    }

    #ddlcountry1 {
        outline: 0;
        background-image: none;
        width: 100%;
        /*height: 100%;*/
        color: black;
        cursor: pointer;
        border: 1px solid black;
        border-radius: 15px;
        padding: 6px 6px 6px 6px;
    }

    #lblMessage {
        display: inline-block;
        margin-bottom: .5rem;
        color: red;
        white-space: nowrap;
        padding-left: 20px;
        display: none;
    }
</style>



<div class="page-header" style="text-align: center;">
    <h3>Add Locations</h3>
</div>
<div class="contentpanel report" style="border: 1px solid #00b8ff85;width: 1180px;margin-top: 45px;margin-left:50px;">
    <div class="row distribute-container">
        <div class="col-md-2" style="margin-top:45px;margin-left:100px">
            <label style="display:flex !important">Region</label>
            @Html.DropDownList("region", new SelectList(Model.regions, "RegionCode", "Name"), htmlAttributes: new { @class = "dropdown-select my-3 float-label form-control", autocomplete = "off" })

        </div>
        <div class="col-md-2" style="margin-top:45px;margin-left:64px">
            <label style="display:flex !important">Country</label>
            <select id="ddlcountry" class="dropdown-select my-3 float-label form-control">
                <option value="0">Please select Country</option>

            </select>
            @*<input type="hidden" id="ddlcountry" class="dropdown-select my-3 float-label" />*@

        </div>
        <div class="col-md-2" style="margin-top:45px;margin-left:64px">
            <label style="display:flex !important">City</label>

            <select id="location" class="dropdown-select my-3 float-label form-control">
                <option value="0">Please select City</option>s

            </select>

        </div>

    </div>

    <div class="row distribute-container myfile">
        <div class="col-md-2" style="margin-top:45px;margin-left:98px">
            <label style="display:flex !important">Address1</label>
            <input id="address1" type="text" class="form-control" />
        </div>
        <div class="col-md-2" style="margin-top:45px;margin-left:98px">
            <label style="display:flex !important">Address2</label>
            <input id="address2" type="text" class="form-control" />
        </div>
        <div class="col-md-2" style="margin-top:45px;margin-left:98px">
            <label style="display:flex !important">Address3</label>
            <input id="address3" type="text" class="form-control" />
        </div>


    </div>

    <div class="row distribute-container myfile">
        <div class="col-md-2" style="margin-top:45px;margin-left:98px">
            <label style="display:flex !important">Title</label>
            <input id="title" value="Map" type="text" class="form-control" />
        </div>
        <div class="col-md-2" style="margin-top:45px;margin-left:98px">
            <label style="display:flex !important">GoogleMapHeading</label>
            <input id="googleMapHeading" type="text" class="form-control" />
        </div>
        </div>

    <div class="row distribute-container">
        <div class="col-lg-10 col-md-8" style="margin-top:45px;margin-left:98px">
            <label style="display:flex !important">GoogleMap</label>
            <textarea style="display:flex !important" id="googleMap" class="form-control"></textarea>
        </div>
        <div class="col-md-2" style="margin-top:45px;margin-left:98px">
            <label style="display:flex !important">Language</label>
            <select id="language" class="dropdown-select my-3 float-label form-control">
                <option value="0">Select Language</option>
                <option value="en-US">English</option>
                <option value="ja">Japan</option>
                <option value="ko">Korea</option>
                <option value="fr-CA">French</option>
                <option value="zh-CHS">Simplified Chinese</option>
                <option value="zh-CHT">Traditional Chinese</option>

            </select>
        </div>
                
    </div>
        
        <div class="row distribute-container">
            <div class="col-md-2" style="margin-top:45px;margin-left:98px">

                <button type="button" id="AddLocation" class="btn btn-success" onclick="AddLocation()">AddLocation</button>
            </div>
        </div>
    </div>

    <script type="text/javascript">



    $("#region").change(function () {

        debugger;
        var region = $("#region").val();

        $.ajax({
            url: '@Url.Action("Country", "Home")',
            type: "POST",
            contentType: "application/json; charset=utf-8",
           data: JSON.stringify({RegionCode:region}),
            dataType: "json",
            success: function (res) {
                debugger;
                //console.log(res.result);

                //var listCountry = [];
                //$.each(res.result, function (data, value) {
                //    listCountry.push({ id: value.CountryCode, text: value.Name })
                //});
                //$("#ddlcountry").select2({
                //    data: listCountry,
                //    multiple: false
                //});
                //var output = [];
                $("#ddlcountry").empty();
                $.each(res.result, function (key, value) {
                    $("#ddlcountry").append('<option value="' + value.CountryCode + '">' + value.Name + '</option>');
                });

             },
            error: function (err) {
                if (err.status === 0) {
                    window.location = '../Logout';
                }
            }
        });
    });


    $("#ddlcountry").change(function () {
                debugger;
        var country = $("#ddlcountry").val();

        $.ajax({
            url: '@Url.Action("City", "Home")',
            type: "POST",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({ CountryCode: country}),
            dataType: "json",
            success: function (res) {

                $("#location").empty();
                $.each(res.result, function (key, value) {
                    $("#location").append('<option value="' + value.Citycode + '">' + value.Name + '</option>');
                });


            },
            error: function (err) {
                if (err.status === 0) {
                    window.location = '../Logout';
                }
            }
        });
    });

    $(document).ready(function () {
        //$("#region").chosen();
        //$("#language").chosen();
        //$("#ddlcountry").chosen();

    });

    function AddLocation() {

        debugger;
        if (Validate()) {
            var region = $("#region").val();
            var country = $("#ddlcountry").val();
            var l = $("#location").val();
            var a1 = $("#address1").val();
            var a2 = $("#address2").val();
            var a3 = $("#address3").val();
            var address = a1 + "<br>" + a2 + "<br>" + a3
            var tt = $("#title").val();
            var gh = $("#googleMapHeading").val();
            var g = $("#googleMap").val();
            var t = $("#target").val();
            var tl = $("#targetLocation").val();
            var lang = $("#language").val();

            $.ajax({
            url: '@Url.Action("AddLocationsPost", "Home")',
            type: "POST",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({
                Region: region, Country: country, Location: l, Address: address, Title: tt,
                    GoogleMapHeading: gh, GoogleMap: g,Language:lang}),
            dataType: "json",
            success: function (result) {
                    if (result.Message > 0) {
                        var alertmsg = "Added successfully";
                        AlertMessage('growl-success', 'Information', alertmsg, false, 3000);
                        $("#address1").val('');
                        $("#address2").val('');
                        $("#address3").val('');
                        $("#title").val('');
                        $("#googleMapHeading").val('');
                        $("#googleMap").val('');
                      
                    }
                    else {
                        var error = "failed";
                        AlertMessage('growl-danger', 'Validation', error, false, 3000);
                    }
            },
            error: function (err) {
                if (err.status === 0) {
                    window.location = '../Logout';
                }
            }
        });


        }
    }

    function Validate() {
        if ($("#region").val() == 0) {
            var message = "please select Region";
            AlertMessage('growl-danger', 'Validation', message, false, 3000);

            return false;
        }
        else if ($("#ddlcountry").val() == "0") {
            var message = "please select Country";
            AlertMessage('growl-danger', 'Validation', message, false, 3000);

            return false;
        }
        else if ($("#location").val() == "0") {
            var message = "Please select City";
            AlertMessage('growl-danger', 'Validation', message, false, 3000);

            return false;
        }
        else if ($("#address1").val() == "") {
            var message = "Address should not be empty";
            AlertMessage('growl-danger', 'Validation', message, false, 3000);

            return false;
        }
        else if ($("#address2").val() == "") {
            var message = "Address should not be empty";
            AlertMessage('growl-danger', 'Validation', message, false, 3000);

            return false;
        }
        else if ($("#address3").val() == "") {
            var message = "Address should not be empty";
            AlertMessage('growl-danger', 'Validation', message, false, 3000);

            return false;
        }
        else if ($("#title").val() == "") {
            var message = "Title should not be empty";
            AlertMessage('growl-danger', 'Validation', message, false, 3000);

            return false;
        }
        else if ($("#googleMapHeading").val() == "") {
            var message = "GoogleMapHeading should not be empty";
            AlertMessage('growl-danger', 'Validation', message, false, 3000);

            return false;
        }
        else if ($("#googleMap").val() == "") {
            var message = "GoogleMap should not be empty";
            AlertMessage('growl-danger', 'Validation', message, false, 3000);

            return false;
        }
        else if ($("#language").val() == "0") {
            var message = "please select Language";
            AlertMessage('growl-danger', 'Validation', message, false, 3000);

            return false;
        }

        else {
            return true;
        }
    }
    function AlertMessage(class_name, title, alert, boolstick, timesec) {
        jQuery.gritter.add({
            title: title,
            text: alert,
            class_name: class_name,
            image: '../images/screen.png',
            sticky: boolstick,
            time: timesec,
            before_open: function () {
                $('.gritter-item-wrapper').remove();
            }
        });
        return false;
    };
    </script>




