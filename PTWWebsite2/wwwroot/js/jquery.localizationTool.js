!function (k) { var n = !1, O = { _languageCodeToOrdinal: function (a) { var e = this.data("activeLanguageCodeArray"), n = k.inArray(a, e); return -1 === n && k.error("Cannot convert " + a + " into an ordinal number"), n }, _ordinalToLanguageCode: function (a) { var e = this.data("activeLanguageCodeArray"); return (e.length <= a || a < 0) && k.error("Cannot convert " + a + " into a language code."), e[a] }, _languageCodeToHtml: function (a) { var e = this.data("settings"), n = e.languages[a], l = ""; n.flag.hasOwnProperty("class") && (l = " " + n.flag.class); var t = ""; n.flag.hasOwnProperty("url") && (t = '<img src="' + n.flag.url + '" />'); var r = n.language, s = n.hasOwnProperty("country"), o = []; o.push('<li class="ltool-language ', a, '">'), e.showFlag && (o.push('<div class="ltool-language-flag', l, '"></div>'), o.push(t)); var g = O._interpolateTemplate.call(this, s ? n.country : void 0, r); return o.push(g), o.push("</li>"), o.join("") }, _interpolateTemplate: function (a, e) { var n = this.data("settings"), l = n.labelTemplate, t = "", r = "", s = "string" == typeof a; (n.showCountry && s && (t = ['<span class="ltool-language-country">', "$1" + a.replace(/[$]/g, "&#36;") + "$2", "</span>"].join("")), n.showLanguage) && (r = ['<span class="', s ? "ltool-has-country " : "", 'ltool-language-name">', "$1" + e.replace(/[$]/g, "&#36;") + "$2", "</span>"].join("")); return '<span class="ltool-language-countryname">' + l.replace(/{{([^{]*)language([^}]*)}}/g, r).replace(/{{([^{]*)country([^}]*)}}/g, t) + "</span>" }, _selectLanguage: function (a) { this.find(".ltool-dropdown-label").html(k(".ltool-language." + a).html()), this.data("selectedLanguageCode", a) }, _initializeWidget: function (a) { var e, n, l = this, t = l.data("settings").languages, r = []; for (r.push('<span tabindex="0" class="ltool-dropdown-label">Change Language</span><div class="ltool-dropdown-label-arrow"></div>'), r.push('<ul class="ltool-dropdown-items">'), n = 0; e = a[n++];)t.hasOwnProperty(e) ? r.push(O._languageCodeToHtml.call(l, e)) : k.error("The language '" + e + "' must be defined"); return r.push("</ul>"), k(r.join("")).appendTo(l), l }, _onDropdownClicked: function () { var a = this, e = a.data("selectedLanguageCode"); return a.find(".ltool-language").removeClass("ltool-is-selected"), a.find("." + e).addClass("ltool-is-selected"), a.toggleClass("ltool-is-visible"), a }, _closeDropdown: function () { this.removeClass("ltool-is-visible") }, _onMouseout: function (a) { var e = this; if (0 < e.find(a.relatedTarget).length) return e.find(".ltool-is-selected").removeClass("ltool-is-selected"), a.preventDefault(), e; e.removeClass("ltool-is-visible") }, _onLanguageSelected: function (a) { var e = a.attr("class").replace("ltool-language", "").replace("ltool-is-selected", "").replace(/ /g, ""); O._selectLanguage.call(this, e), O._mayTranslate.call(this, e) }, _selectPreviousLanguage: function () { var a = this, e = a.data("selectedLanguageCode"), n = O._languageCodeToOrdinal.call(a, e); if (0 !== n) { var l = O._ordinalToLanguageCode.call(a, n - 1); return a.find(".ltool-is-selected").removeClass("ltool-is-selected"), O._selectLanguage.call(a, l), O._mayTranslate.call(a, l), a.find("." + l).addClass("ltool-is-selected"), a } }, _selectNextLanguage: function () { var a = this, e = a.data("activeLanguageCodeArray"), n = a.data("selectedLanguageCode"), l = O._languageCodeToOrdinal.call(a, n); if (!(l + 1 >= e.length)) { var t = O._ordinalToLanguageCode.call(a, l + 1); return a.find(".ltool-is-selected").removeClass("ltool-is-selected"), O._selectLanguage.call(a, t), O._mayTranslate.call(a, t), a.find("." + t).addClass("ltool-is-selected"), a } }, _onKeydown: function (a) { var e = this; switch (a.keyCode) { case 13: O._onDropdownClicked.call(e), a.preventDefault(); break; case 40: O._selectNextLanguage.call(e), a.preventDefault(); break; case 38: O._selectPreviousLanguage.call(e), a.preventDefault(); break; case 27: O._closeDropdown.call(e), a.preventDefault() }return e }, _bindEvents: function () { var e = this; return e.bind("mousedown.localizationTool", function (a) { n = !1, O._onKeydown.call(e, a) }).bind("click.localizationTool", function (a) { O._onDropdownClicked.call(e, a) }).bind("keydown.localizationTool", function (a) { n = !0, O._onKeydown.call(e, a) }).bind("mouseout.localizationTool", function (a) { O._onMouseout.call(e, a) }).bind("focusout.localizationTool", function () { n && O._closeDropdown.call(e) }), e.find(".ltool-language").bind("click.localizationTool", function () { O._onLanguageSelected.call(e, k(this)) }), e }, _decomposeStringsForReferenceMapping: function () { var a, e = { idStrings: [], classStrings: [], elementStrings: [], textStrings: [], attributeStrings: [] }, n = this.data("settings").strings, l = new RegExp("^[a-zA-Z-]+?::"); for (a in n) n.hasOwnProperty(a) && (a.match(l) ? e.attributeStrings.push(a) : 0 === a.indexOf("id:") ? e.idStrings.push(a) : 0 === a.indexOf("class:") ? e.classStrings.push(a) : 0 === a.indexOf("element:") ? e.elementStrings.push(a) : e.textStrings.push(a)); return e }, _buildStringReferenceMapping: function () { var a, _, m = {}, e = this.data("settings"), w = e.strings, b = O._decomposeStringsForReferenceMapping.call(this); for (_ = 0; a = b.idStrings[_++];) { var n = a.substring("id:".length), l = k("#" + n), t = l.contents(); !0 === e.ignoreUnmatchedSelectors && 0 === t.length || (1 !== t.length ? k.error(a + " must contain exactly one text node, found " + t.length + " instead") : 3 !== t[0].nodeType ? k.error(a + " does not contain a #text node (i.e., type 3)") : m[a] = { isAttribute: !1, originalText: l.text(), domNodes: [l] }) } var r = function (a, e, n, l) { var t, r = a.replace(":", ""); for (_ = 0; t = b[r + "Strings"][_++];) { var s, o = t.substring(a.length), g = [], i = !0; s = void 0; var u, c = 0; a: for (; u = k(e + o)[c++];) { var d = k(u); if (n) { var f = d.attr("id"); if ("string" == typeof f && w.hasOwnProperty("id:" + f)) continue a } if (l) { var h = d.attr("class"); if ("string" == typeof h) for (var p, y = h.split(" "), T = 0; p = y[T++];)if ("string" == typeof p && w.hasOwnProperty("class:" + p)) continue a } var v = d.contents(); 0 === v.length || 1 < v.length ? k.error("A '" + t + "' node was found to contain " + v.length + " child nodes. This node must contain exactly one text node!") : 3 === v[0].nodeType ? (g.push(d), void 0 === s ? s = d.text() : s !== d.text() && (i = !1)) : k.error("A '" + t + "' node does not contain a #text node (i.e., type 3)") } i ? m[t] = { isAttribute: !1, originalText: s, domNodes: g } : k.error("Not all text content of elements with " + t + " were found to be '" + s + "'. So these elements will be ignored.") } }; r("class:", ".", !0, !1), r("element:", "", !0, !0); var s, o, g = new RegExp("(class|id|element):[^:]"); for (_ = 0; s = b.attributeStrings[_++];) { var i = s.split("::"), u = i.shift(); 0 === i.length && k.error("sorry, you need to specify class:, element: or id: selectors in " + s); var c = i.join("::"); i[0].match(g) || k.error(s + "Doesn't look right. Perhaps you've added extra semicolons?"), c = (c = (c = c.replace("id:", "#")).replace("class:", ".")).replace("element:", ""); var d = k(c + "[" + u + "]"); 0 === d.length && k.error('The selector "' + s + '" does not point to an existing DOM element'); var f = 0, h = !0, p = k(d[0]).attr(u), y = []; for (f = 0; f < d.length; f++) { var T = k(d[f]); p !== T.attr(u) && (h = !1), y.push(T) } h || k.error("Not all the attribute values selected via " + s + " are the same"), m[s] = { isAttribute: !0, originalText: p, domNodes: y } } for (_ = 0; o = b.textStrings[_++];) { var v, C, L = [], S = k(":contains(" + o + ")"); for (v = 0; C = S[v++];) { var P = k(C).contents(); 1 === P.length && 3 === P[0].nodeType && L.push(k(C)) } 0 < L.length && (m[o] = { isAttribute: !1, originalText: o, domNodes: L }) } return this.data("refMappingObj", m), this }, _mayTranslate: function (a) { !1 !== this.data("settings").onLanguageSelected(a) && O._translate.call(this, a) }, getSelectedLanguageCode: function () { return this.data("selectedLanguageCode") }, _translate: function (a) { var e, n = this.data("settings"), l = n.strings, t = this.data("refMappingObj"), r = "ltr"; if (void 0 !== a) { if (!n.languages.hasOwnProperty(a)) return k.error("The language code " + a + " is not defined"), this; n.languages[a].hasOwnProperty("cssDirection") && (r = n.languages[a].cssDirection) } for (e in t) if (t.hasOwnProperty(e)) { var s; s = void 0 === a || a === n.defaultLanguage ? t[e].originalText : l[e][a]; var o, g, i = t[e].domNodes; if (!0 === t[e].isAttribute) { var u = e.split("::", 1)[0]; for (g = 0; o = i[g++];)o.attr(u, s), o.css("direction", r) } else for (g = 0; o = i[g++];)o.html(s), o.css("direction", r) } return this }, translate: function (a) { return O._translate.call(this, a), O._selectLanguage.call(this, a), this }, translateString: function (a, e) { var n = this.data("settings"), l = n.strings; if (n.languages.hasOwnProperty(e)) if (l.hasOwnProperty(a)) { var t = l[a] || {}; if (t.hasOwnProperty(e)) return t[e]; k.error("A translation for the string '" + a + "' was not defined for language " + e + ". Defined languages are: " + Object.keys(t).join(", ")) } else k.error("The string '" + a + "' was not translated in any language."); else k.error("The language code " + e + " is not known") }, destroy: function () { var e = this; return e.removeData(), e.unbind("click.localizationTool", function (a) { O._onDropdownClicked.call(e, a) }), e.find(".ltool-language").unbind("click.localizationTool", function () { O._onLanguageSelected.call(e, k(this)) }), e.unbind("mouseout.localizationTool", function (a) { O._onMouseout.call(e, a) }), e.empty(), e }, _sortCountryLanguagesByCountryName: function (n, a) { return a.sort(function (a, e) { return n[a].hasOwnProperty("country") && n[e].hasOwnProperty("country") ? n[a].country.localeCompare(n[e].country) : n[a].hasOwnProperty("country") ? n[a].country.localeCompare(n[e].language) : n[a].language.localeCompare(n[e].country) }) }, _findSubsetOfUsedLanguages: function (a) { var e, n = this.data("settings"), l = {}, t = 0; for (e in a) if (a.hasOwnProperty(e)) { var r, s = a[e]; for (r in s) s.hasOwnProperty(r) && (l.hasOwnProperty(r) || (l[r] = 0)), l[r]++; t++ } var o, g = []; for (o in l) l.hasOwnProperty(o) && l[o] === t && g.push(o); var i = k.inArray(n.defaultLanguage, g); return -1 < i && g.splice(i, 1), g.unshift(n.defaultLanguage), O._sortCountryLanguagesByCountryName.call(this, n.languages, g) }, init: function (a) { var n = k.extend({ defaultLanguage: "en_GB", ignoreUnmatchedSelectors: !1, showFlag: !0, showLanguage: !0, showCountry: !0, labelTemplate: "{{country}} {{(language)}}", languages: {}, strings: {}, onLanguageSelected: function () { return !0 } }, a); return n.languages = k.extend({ en_GB: { country: "United Kingdom", language: "English", countryTranslated: "United Kingdom", languageTranslated: "English", flag: { class: "flag flag-gb" } }, de_DE: { country: "Germany", language: "German", countryTranslated: "Deutschland", languageTranslated: "Deutsch", flag: { class: "flag flag-de" } }, es_ES: { country: "Spain", language: "Spanish", countryTranslated: "España", languageTranslated: "Español", flag: { class: "flag flag-es" } }, fr_FR: { country: "France", language: "French", countryTranslated: "France", languageTranslated: "Français", flag: { class: "flag flag-fr" } }, ko_KR: { country: "Korea, Republic of.", language: "Korean", countryTranslated: "대한민국", languageTranslated: "한국어", flag: { class: "flag flag-kr" } }, pt_BR: { country: "Brazil", language: "Portuguese", countryTranslated: "Brasil", languageTranslated: "Português", flag: { class: "flag flag-br" } }, en_AU: { country: "Australia", language: "English", countryTranslated: "Australia", languageTranslated: "English", flag: { class: "flag flag-au" } }, en_IN: { country: "India", language: "English", countryTranslated: "India", languageTranslated: "English", flag: { class: "flag flag-in" } }, it_IT: { country: "Italy", language: "Italian", countryTranslated: "Italia", languageTranslated: "Italiano", flag: { class: "flag flag-it" } }, jp_JP: { country: "Japan", language: "Japanese", countryTranslated: "日本", languageTranslated: "日本語", flag: { class: "flag flag-jp" } }, ar_TN: { country: "Tunisia", language: "Arabic", countryTranslated: "تونس", languageTranslated: "عربي", cssDirection: "rtl", flag: { class: "flag flag-tn" } }, el_GR: { country: "Greece", language: "Greek", countryTranslated: "Ελλάδα", languageTranslated: "Ελληνικά", flag: { class: "flag flag-gr" } }, en_IE: { country: "Ireland", language: "English", countryTranslated: "Ireland", languageTranslated: "English", flag: { class: "flag flag-ie" } }, nl_NL: { country: "Netherlands", language: "Dutch", countryTranslated: "Nederland", languageTranslated: "Nederlands", flag: { class: "flag flag-nl" } }, zh_CN: { country: "China", language: "Simplified Chinese", countryTranslated: "中国", languageTranslated: "简体中文", flag: { class: "flag flag-cn" } }, zh_TW: { country: "Taiwan", language: "Traditional Chinese", countryTranslated: "臺灣", languageTranslated: "繁體中文", flag: { class: "flag flag-tw" } }, fi_FI: { country: "Finland", language: "Finnish", countryTranslated: "Suomi", languageTranslated: "Suomi", flag: { class: "flag flag-fi" } }, pt_PT: { country: "Portugal", language: "Portuguese", countryTranslated: "Portugal", languageTranslated: "Português", flag: { class: "flag flag-pt" } }, pl_PL: { country: "Poland", language: "Polish", countryTranslated: "Polska", languageTranslated: "Polski", flag: { class: "flag flag-pl" } }, ru_RU: { country: "Russia", language: "Russian", languageTranslated: "Русский", countryTranslated: "Россия", flag: { class: "flag flag-ru" } }, hi_IN: { country: "India", language: "Hindi", countryTranslated: "भारत", languageTranslated: "हिन्द", flag: { class: "flag flag-in" } }, ta_IN: { country: "India", language: "Tamil", countryTranslated: "இந்தியா", languageTranslated: "தமிழ்", flag: { class: "flag flag-in" } }, ml_IN: { country: "India", language: "Malayalam", countryTranslated: "ഇന്ത്യ", languageTranslated: "മലയാളം", flag: { class: "flag flag-in" } }, tr_TR: { country: "Turkey", language: "Turkish", countryTranslated: "Türkiye", languageTranslated: "Türkçe", flag: { class: "flag flag-tr" } }, he_IL: { country: "Israel", language: "Hebrew", countryTranslated: "מדינת ישראל", languageTranslated: "עברית", cssDirection: "rtl", flag: { class: "flag flag-il" } }, da_DK: { country: "Denmark", language: "Danish", countryTranslated: "Danmark", languageTranslated: "Dansk", flag: { class: "flag flag-dk" } }, ro_RO: { country: "Romania", language: "Romanian", countryTranslated: "România", languageTranslated: "Român", flag: { class: "flag flag-ro" } }, eo: { language: "Esperanto", languageTranslated: "Esperanto", flag: { class: "flag flag-esperanto" } }, sk_SK: { country: "Slovakia", language: "Slovak", countryTranslated: "Slovensko", languageTranslated: "Slovenčina", flag: { class: "flag flag-sk" } }, es_MX: { country: "Mexico", language: "Spanish", countryTranslated: "México", languageTranslated: "Español", flag: { class: "flag flag-mx" } }, tl_PH: { country: "Philippines", language: "Tagalog", countryTranslated: "Pilipinas", languageTranslated: "Tagalog", flag: { class: "flag flag-ph" } }, cs_CZ: { country: "Czech Republic", language: "Czech", countryTranslated: "Česká republika", languageTranslated: "Čeština", flag: { class: "flag flag-cz" } } }, n.languages), n.languages.hasOwnProperty(n.defaultLanguage) || k.error("FATAL: the default language " + n.defaultLanguage + " is not defined in the 'languages' parameter!"), this.each(function () { var a = k(this); a.data("settings", n); var e = O._findSubsetOfUsedLanguages.call(a, n.strings); a.data("activeLanguageCodeArray", e), O._initializeWidget.call(a, e), O._selectLanguage.call(a, n.defaultLanguage), O._bindEvents.call(a), O._buildStringReferenceMapping.call(a) }) } }, e = "localizationTool"; k.fn[e] = function (a) { if (O[a]) { if (!0 === this.data("initialized")) return O[a].apply(this, Array.prototype.slice.call(arguments, 1)); throw new Error("method " + a + " called on an uninitialized instance of " + e) } if ("object" == typeof a || !a) return this.data("initialized", !0), O.init.apply(this, arguments); k.error("Cannot call method " + a) } }(jQuery);